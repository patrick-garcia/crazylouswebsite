<?php include 'private/historyprocess.php' ?>

<div class="container text-secondary" id="history-container">
  <div class="row">
    <div class="col-md-10 offset-1">
      <div class="card box-shadow p-4">
        <h4 class="m-3 mb-4">Order History</h4>
        <table class="table table-striped" id="history-table">
          <tbody class="">
            <tr>
              <?php
                $hist_heading = ['order ref #', 'invoice #', 'date', 'total'];
                foreach($hist_heading as $val) echo '<th>' . $val . '</th>'; ?>
            </tr>
            <?php
              global $con; $con->next_result();
              $history = $con->query("CALL history_load($id)");
              
              if($history->num_rows) {
                while($hist_row = $history->fetch_assoc()) {
                  displayOrderHistory($hist_row);
                }
              } else noOrderHistory();
            ?>
          </tbody>
        </table>
      </div> <!-- end of card -->
    </div>
  </div> <!-- end of row -->
</div>


